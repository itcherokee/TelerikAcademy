<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Task 12: Write a function that creates a HTML UL using a template for every HTML LI.</title>
    <link href="styles/js-console.css" rel="stylesheet" />
</head>
<body>
    <div>Task 12: Write a function that creates a HTML UL using a template for every HTML LI.</div>
    <label>Text with placeholders: </label>
    <xmp>
        <div data-type="template" id="list-item">
            <strong>-{name}-</strong> <span>-{age}-</span>
        </div>
    </xmp>
    <a href="#" id="btn-check-prime" onclick="onBtnClick()">Parse</a>
    <div id="above-js"></div>
    <input type="text" id="tb-result" style="width:800px;" />
    <div id="js-console">
    </div>
    <script src="script/js-console.js"></script>
    <script>

        function onBtnClick() {

            document.getElementById("above-js").innerHTML = '<div data-type="template" id="list-item" style="visibility:hidden;"><strong>-{name}-</strong> <span>-{age}-</span></div>';
            jsConsole.writeLine("Result UL list: " + parseTemplate());
            document.getElementById("tb-result").value = parseTemplate();
        }

        // a class/constructor for creation of person objects
        function person(name, age) {
            var obj = {};
            obj.name = name;
            obj.age = age;
            return obj;
        }

        // creation of the people array to be used in UL generation
        function createPeople() {
            var people = [];
            var person1 = person("Peshko", 12);
            var person2 = person("Goshko", 23);
            var person3 = person("Toshko", 40);
            var person4 = person("Sashko", 5);
            people.push(person1);
            people.push(person2);
            people.push(person3);
            people.push(person4);
            return people;
        }

        // replace placeholders with actual person name & age
        function replacePlaceholders(people, source) {
            var target = [];
            var indexName = 0;
            var indexAge = 0;
            var tempSource = "";
            for (var person in people) {
                tempSource = source;
                indexName = source.indexOf("-{name}-");
                indexAge = source.indexOf("-{age}-");
                tempSource = tempSource.replace("-{name}-", people[person].name);
                tempSource = tempSource.replace("-{age}-", people[person].age);
                target.push(tempSource);
            }
            return target;
        }

        // function generating UL list to replace (to be inserted) template in the HTML 
        function generateList(people, template) {
            var target = ["<ul>"];
            var newSource = replacePlaceholders(people, template);
            for (var line in newSource) {
                target.push("<li>");
                target.push(newSource[line]);
                target.push("</li>");
            }
            target.push("</ul>");
            return target.join("");
        }

        // parser
        function parseTemplate() {
            var template = document.getElementById("list-item").innerHTML;
            var peopleList = createPeople();
            return generateList(peopleList, template);
        }

    </script>
</body>
</html>

