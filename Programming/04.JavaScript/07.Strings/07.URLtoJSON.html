<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Task 7: Write a script that parses an URL address. Return the elements in a JSON object.</title>
    <link href="styles/js-console.css" rel="stylesheet" />
</head>
<body>
    <div>Task 7: Write a script that parses an URL address. Return the elements in a JSON object.</div>
    <label for="tb-text">URL: </label>
    <input type="text" name="tb-text" id="tb-text" />
    <a href="#" id="btn-check-prime" onclick="onBtnClick()">Extract</a>
    <div id="js-console">
    </div>
    <script src="script/js-console.js"></script>
    <script>

        function onBtnClick() {
            jsConsole.writeLine("Modified text:");
            jsConsole.writeLine(convertToJSON(jsConsole.read("#tb-text")));
        }

        function convertToJSON(source) {
            var target = "";
            // copy the protocol into JSON
            target = "{protocol: \"" + source.slice(0, source.indexOf(':')) + "\", ";
            // find ending of the protocol declaration
            var startIndex = source.indexOf("://") + 3;
            // find start of the resource 
            var endIndex = source.indexOf('/', startIndex);
            if (endIndex > 0) {
                // there is a resource & we copy into JSON the server & protocol
                target += "server: \"" + source.slice(startIndex, endIndex) + "\", ";
                target += "resource: \"" + source.slice(endIndex, source.length) + "\"}";
            }
            else {
                // there is no resource & we copy into JSON only the server
                target += "server: \"" + source.slice(startIndex, source.length) + "\"}";
            }            
            return target;
        }

    </script>
</body>
</html>

