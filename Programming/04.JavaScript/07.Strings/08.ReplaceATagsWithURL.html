<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Task 8: Write a JavaScript function that replaces in a HTML document given as string all the tags < a href="…">…<\/a> with corresponding tags [URL=…]…[/URL].</title>
    <link href="styles/js-console.css" rel="stylesheet" />
</head>
<body>
    <div>Task 8: Write a JavaScript function that replaces in a HTML document given as string all the tags < a href="…">…<\/a> with corresponding tags [URL=…]…[/URL].</div>
    <label for="tb-text">URL: </label>
    <input type="text" name="tb-text" id="tb-text" />
    <a href="#" id="btn-check-prime" onclick="onBtnClick()">Replace</a>
    <div id="js-console">
    </div>
    <script src="script/js-console.js"></script>
    <script>

        function onBtnClick() {
            jsConsole.writeLine("Modified URLs:");
            jsConsole.writeLine(replaceATags(jsConsole.read("#tb-text")));
        }

        function replaceATags(source) {
            var startIndex = 0;
            var endIndex = 0;
            var closingIndex = 0;
            var position = 0;
            var target = "";
            while (true) {
                // search for tag <a> and get the index
                startIndex = source.indexOf("<a href=", position);
                if (startIndex < 0)
                {
                    // if no more <a>, exit the loop and return the new (target) string
                    break;
                }
                // copy the text from last <a> closing to newly found into new string (target)
                target += source.slice(position, startIndex) + "[URL=";
                position = startIndex + 8;
                endIndex = source.indexOf(">",startIndex);
                closingIndex = source.indexOf("</a>", position);
                // copy the web address from current <a> and text between opening and closing <a> tags into new string (target)
                target += source.slice(position++, endIndex) + "]" + source.slice(endIndex + 1, closingIndex) + "[/URL]";
                position = closingIndex+4;
            }
            // if we did not reach the end of the source string, copy the rest of text (after last <a> tag) into new string (target)
            if (position < source.length)
            {
                target += source.slice(position, source.length);
            }
            return target;
        }

    </script>
</body>
</html>

